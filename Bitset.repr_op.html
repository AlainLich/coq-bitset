<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<title>Bitset.repr_op</title>
</head>

<body>

<div id="page">

<div id="header">
</div>

<div id="main">

<h1 class="libtitle">Library Bitset.repr_op</h1>

<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.FSets.FMapList.html#"><span class="id" title="library">FMapList</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Structures.OrderedType.html#"><span class="id" title="library">OrderedType</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Structures.OrderedTypeEx.html#"><span class="id" title="library">OrderedTypeEx</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Arith.Compare_dec.html#"><span class="id" title="library">Compare_dec</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Arith.Peano_dec.html#"><span class="id" title="library">Peano_dec</span></a>.<br/>
<span class="id" title="var">From</span> <span class="id" title="var">Ssreflect</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">ssreflect</span> <span class="id" title="library">ssrbool</span> <span class="id" title="library">eqtype</span> <span class="id" title="library">ssrnat</span> <span class="id" title="library">seq</span> <span class="id" title="library">fintype</span> <span class="id" title="library">ssrfun</span>.<br/>
<span class="id" title="var">From</span> <span class="id" title="var">MathComp</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">tuple</span> <span class="id" title="library">finset</span> <span class="id" title="library">div</span>.<br/>
<span class="id" title="var">From</span> <span class="id" title="var">Bits</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">bits</span> <span class="id" title="library">extraction.axioms32</span>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Bitset.props.bineqs.html#"><span class="id" title="library">props.bineqs</span></a> <a class="idref" href="Bitset.props.getbit.html#"><span class="id" title="library">props.getbit</span></a> <a class="idref" href="Bitset.spec.html#"><span class="id" title="library">spec</span></a>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <a class="idref" href="Bitset.ops.create.html#"><span class="id" title="library">create</span></a> <a class="idref" href="Bitset.ops.get.html#"><span class="id" title="library">get</span></a> <a class="idref" href="Bitset.ops.set.html#"><span class="id" title="library">set</span></a> <a class="idref" href="Bitset.ops.inter.html#"><span class="id" title="library">inter</span></a> <a class="idref" href="Bitset.ops.union.html#"><span class="id" title="library">union</span></a> <a class="idref" href="Bitset.ops.symdiff.html#"><span class="id" title="library">symdiff</span></a> <a class="idref" href="Bitset.ops.compl.html#"><span class="id" title="library">compl</span></a> <a class="idref" href="Bitset.ops.keep_min.html#"><span class="id" title="library">keep_min</span></a> <a class="idref" href="Bitset.ops.min.html#"><span class="id" title="library">min</span></a> <a class="idref" href="Bitset.ops.cardinal.html#"><span class="id" title="library">cardinal</span></a> <a class="idref" href="Bitset.ops.shift.html#"><span class="id" title="library">shift</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab14"></a><h1 class="section">A formalisation of bitsets using OCaml's integers</h1>

<div class="paragraph"> </div>


<div class="paragraph"> </div>


<div class="paragraph"> </div>

    We establish a relation between OCaml's types (which extracts
    efficiently to machine-native datatypes) and the finset
    library. This is achieved by composing the representation of <span class="inlinecode"><span class="id" title="definition">BITS</span></span>
    <span class="inlinecode">32</span> with OCaml's <span class="inlinecode"><span class="id" title="var">int</span></span> (defined in <span class="inlinecode"><span class="id" title="var">coq</span>:<span class="id" title="library">bits</span></span>) and the
    representation of <span class="inlinecode"><span class="id" title="library">finset</span></span> with <span class="inlinecode"><span class="id" title="definition">BITS</span></span> <span class="inlinecode"><a class="idref" href="queens.html#n"><span class="id" title="variable">n</span></a></span>.

<div class="paragraph"> </div>

 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a name="machine_repr"><span class="id" title="definition">machine_repr</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">n</span>: <span class="id" title="axiom">Int</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">E</span>: <span class="id" title="notation">{</span><span class="id" title="notation">set</span> <span class="id" title="notation">'</span><span class="id" title="notation">I_wordsize</span><span class="id" title="notation">}</span>): <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">∃</span></a> <span class="id" title="var">bv</span><a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#84eb6d2849dbf3581b1c0c05add5f2d8"><span class="id" title="notation">,</span></a> <span class="id" title="definition">native_repr</span> <a class="idref" href="Bitset.repr_op.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="Bitset.repr_op.html#bv"><span class="id" title="variable">bv</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d82a7d96d3659d805ffe732283716822"><span class="id" title="notation">∧</span></a> <a class="idref" href="Bitset.spec.html#repr"><span class="id" title="definition">repr</span></a> <a class="idref" href="Bitset.repr_op.html#bv"><span class="id" title="variable">bv</span></a> <a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a>.<br/>

<br/>
</div>

<div class="doc">
We go from Coq's <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a></span> to <span class="inlinecode"><span class="id" title="axiom">Int</span></span> by (brutally) collapsing <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a></span>
    to <span class="inlinecode"><span class="id" title="var">int</span></span>: 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Extract</span> <span class="id" title="keyword">Inductive</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> ⇒ <span class="id" title="var">int</span> [ "0" "succ" ]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"(fun fO fS n -&gt; if n=0 then fO () else fS (n-1))".<br/>

<br/>
<span class="id" title="keyword">Axiom</span> <a name="toInt"><span class="id" title="axiom">toInt</span></a>: <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="axiom">Int</span>.<br/>

<br/>
<span class="id" title="keyword">Extract</span> <span class="id" title="var">Inlined</span> <span class="id" title="var">Constant</span> <span class="id" title="var">toInt</span> ⇒ "".<br/>

<br/>
<span class="id" title="keyword">Axiom</span> <a name="toInt_def"><span class="id" title="axiom">toInt_def</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">n</span>, <a class="idref" href="Bitset.repr_op.html#toInt"><span class="id" title="axiom">toInt</span></a> <a class="idref" href="Bitset.repr_op.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="definition">bitsToInt</span> (<span class="id" title="notation">#</span> <a class="idref" href="Bitset.repr_op.html#n"><span class="id" title="variable">n</span></a>).<br/>

<br/>
<span class="id" title="keyword">Axiom</span> <a name="fromInt"><span class="id" title="axiom">fromInt</span></a>: <span class="id" title="axiom">Int</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>.<br/>

<br/>
<span class="id" title="keyword">Extract</span> <span class="id" title="var">Inlined</span> <span class="id" title="var">Constant</span> <span class="id" title="var">fromInt</span> ⇒ "".<br/>

<br/>
<span class="id" title="keyword">Axiom</span> <a name="fromInt_def"><span class="id" title="axiom">fromInt_def</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">n</span>, <a class="idref" href="Bitset.repr_op.html#fromInt"><span class="id" title="axiom">fromInt</span></a> <a class="idref" href="Bitset.repr_op.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="definition">toNat</span> (<span class="id" title="definition">bitsFromInt</span> <a class="idref" href="Bitset.repr_op.html#n"><span class="id" title="variable">n</span></a>).<br/>

<br/>
</div>

<div class="doc">
<a name="lab15"></a><h2 class="section">Equality</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="eq_repr"><span class="id" title="lemma">eq_repr</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">i</span> <span class="id" title="var">i'</span> <span class="id" title="var">E</span> <span class="id" title="var">E'</span>, <a class="idref" href="Bitset.repr_op.html#machine_repr"><span class="id" title="definition">machine_repr</span></a> <a class="idref" href="Bitset.repr_op.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Bitset.repr_op.html#machine_repr"><span class="id" title="definition">machine_repr</span></a> <a class="idref" href="Bitset.repr_op.html#i'"><span class="id" title="variable">i'</span></a> <a class="idref" href="Bitset.repr_op.html#E'"><span class="id" title="variable">E'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><span class="id" title="axiom">eq</span> <a class="idref" href="Bitset.repr_op.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="Bitset.repr_op.html#i'"><span class="id" title="variable">i'</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">==</span> <a class="idref" href="Bitset.repr_op.html#E'"><span class="id" title="variable">E'</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ <span class="id" title="var">i</span> <span class="id" title="var">i'</span> <span class="id" title="var">E</span> <span class="id" title="var">E'</span> [<span class="id" title="var">bv</span> [<span class="id" title="var">Hbv1</span> <span class="id" title="var">Hbv2</span>]] [<span class="id" title="var">bv'</span> [<span class="id" title="var">Hbv'1</span> <span class="id" title="var">Hbv'2</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">axioms32.eq_repr</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">bv</span> <span class="id" title="var">bv'</span>)=&gt; //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> -(<a class="idref" href="Bitset.spec.html#eq_repr"><span class="id" title="lemma">spec.eq_repr</span></a> <span class="id" title="var">_</span> <span class="id" title="var">bv</span> <span class="id" title="var">bv'</span> <span class="id" title="var">E</span> <span class="id" title="var">E'</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab16"></a><h2 class="section">Zero</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="zero_repr"><span class="id" title="lemma">zero_repr</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="Bitset.repr_op.html#machine_repr"><span class="id" title="definition">machine_repr</span></a> <span class="id" title="axiom">zero</span> <span class="id" title="definition">set0</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<span class="id" title="definition">spec.zero</span> <span class="id" title="definition">wordsize</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="lemma">fromNat0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">zero_repr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span>: <a class="idref" href="Bitset.spec.html#empty_repr"><span class="id" title="lemma">empty_repr</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab17"></a><h2 class="section">Singleton</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a name="singleton"><span class="id" title="definition">singleton</span></a> (<span class="id" title="var">x</span>: <span class="id" title="notation">'</span><span class="id" title="notation">I_wordsize</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="axiom">lsl</span> <span class="id" title="axiom">one</span> (<a class="idref" href="Bitset.repr_op.html#toInt"><span class="id" title="axiom">toInt</span></a> <a class="idref" href="Bitset.repr_op.html#x"><span class="id" title="variable">x</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="singleton_repr"><span class="id" title="lemma">singleton_repr</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">x</span>: <span class="id" title="notation">'</span><span class="id" title="notation">I_wordsize</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Bitset.repr_op.html#machine_repr"><span class="id" title="definition">machine_repr</span></a> (<a class="idref" href="Bitset.repr_op.html#singleton"><span class="id" title="definition">singleton</span></a> <a class="idref" href="Bitset.repr_op.html#x"><span class="id" title="variable">x</span></a>) <span class="id" title="notation">[</span><span class="id" title="notation">set</span> <a class="idref" href="Bitset.repr_op.html#x"><span class="id" title="variable">x</span></a><span class="id" title="notation">]</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<span class="id" title="definition">shlBn</span> <span class="id" title="notation">#</span>1 <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> <span class="id" title="lemma">lsl_repr</span>⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="lemma">leq_trans</span> (<span class="id" title="var">n</span> := <span class="id" title="var">x</span><span class="id" title="notation">.+1</span>))=&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">one_repr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<span class="id" title="lemma">existsP</span>; <span class="id" title="tactic">∃</span> <span class="id" title="notation">#</span> <span class="id" title="notation">(</span><span class="id" title="var">x</span><span class="id" title="notation">)</span>; <span class="id" title="tactic">apply</span>/<span class="id" title="lemma">andP</span>; <span class="id" title="tactic">split</span>⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<span class="id" title="axiom">eqIntP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Bitset.repr_op.html#toInt_def"><span class="id" title="axiom">toInt_def</span></a>⇒ //.<br/>
&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> <a class="idref" href="Bitset.props.getbit.html#getBit_shlBn"><span class="id" title="lemma">getBit_shlBn</span></a>⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Bitset.spec.html#singleton_repr"><span class="id" title="lemma">singleton_repr</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab18"></a><h2 class="section">Left &amp; right shift</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="sl_repr"><span class="id" title="lemma">sl_repr</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">i</span> <span class="id" title="var">E</span>, <a class="idref" href="Bitset.repr_op.html#machine_repr"><span class="id" title="definition">machine_repr</span></a> <a class="idref" href="Bitset.repr_op.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Bitset.repr_op.html#machine_repr"><span class="id" title="definition">machine_repr</span></a> (<span class="id" title="axiom">lsl</span> <a class="idref" href="Bitset.repr_op.html#i"><span class="id" title="variable">i</span></a> <span class="id" title="axiom">one</span>) <span class="id" title="notation">[</span><span class="id" title="notation">set</span> <span class="id" title="var">i</span> <span class="id" title="notation">:</span> <span class="id" title="notation">'</span><span class="id" title="notation">I_wordsize</span> <span class="id" title="notation">|</span> 0 <span class="id" title="notation">&lt;</span> <a class="idref" href="Bitset.repr_op.html#i"><span class="id" title="variable">i</span></a> <span class="id" title="notation">&amp;</span> @<span class="id" title="definition">inord</span> <span class="id" title="definition">wordsize</span><span class="id" title="notation">.-1</span> <a class="idref" href="Bitset.repr_op.html#i"><span class="id" title="variable">i</span></a><span class="id" title="notation">.-1</span> <span class="id" title="notation">\</span><span class="id" title="keyword">in</span> <a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a><span class="id" title="notation">]</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ <span class="id" title="var">i</span> <span class="id" title="var">E</span> [<span class="id" title="var">bv</span> [<span class="id" title="var">r_native</span> <span class="id" title="var">r_set</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<span class="id" title="definition">shlBn</span> <span class="id" title="var">bv</span> 1); <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;× <span class="id" title="tactic">apply</span>: <span class="id" title="lemma">lsl_repr</span>⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<span class="id" title="lemma">existsP</span>; <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">apply</span>/<span class="id" title="lemma">andP</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">one_repr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;× <span class="id" title="var">have</span> <span class="id" title="var">H</span>: <span class="id" title="definition">wordsize</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="definition">wordsize</span><span class="id" title="notation">.-1</span><span class="id" title="notation">.+1</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">compute</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> -&gt;: <span class="id" title="notation">[</span><span class="id" title="notation">set</span> <span class="id" title="var">i0</span> <span class="id" title="notation">:</span> <span class="id" title="notation">'</span><span class="id" title="notation">I_wordsize</span> <span class="id" title="notation">|</span> 0 <span class="id" title="notation">&lt;</span> <span class="id" title="var">i0</span> <span class="id" title="notation">&amp;</span> <span class="id" title="definition">inord</span> <span class="id" title="var">i0</span><span class="id" title="notation">.-1</span> <span class="id" title="notation">\</span><span class="id" title="keyword">in</span> <span class="id" title="var">E</span><span class="id" title="notation">]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="notation">[</span><span class="id" title="notation">set</span> <span class="id" title="var">i0</span> <span class="id" title="notation">:</span> <span class="id" title="notation">'</span><span class="id" title="notation">I_wordsize</span> <span class="id" title="notation">|</span> 0 <span class="id" title="notation">&lt;</span> <span class="id" title="var">i0</span> <span class="id" title="notation">&amp;</span> <span class="id" title="definition">cast_ord</span> <span class="id" title="var">H</span> (<span class="id" title="definition">inord</span> <span class="id" title="var">i0</span><span class="id" title="notation">.-1</span>) <span class="id" title="notation">\</span><span class="id" title="keyword">in</span> <span class="id" title="var">E</span><span class="id" title="notation">]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="lemma">setP</span> /<span class="id" title="definition">eq_mem</span>⇒ <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<span class="id" title="lemma">in_set</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> -&gt;: <span class="id" title="definition">cast_ord</span> <span class="id" title="var">H</span> (<span class="id" title="definition">inord</span> <span class="id" title="var">x</span><span class="id" title="notation">.-1</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="definition">inord</span> <span class="id" title="var">x</span><span class="id" title="notation">.-1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">ord_inj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="Bitset.props.bineqs.html#nat_cast_ord"><span class="id" title="lemma">nat_cast_ord</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Bitset.ops.shift.html#sl_repr"><span class="id" title="lemma">shift.sl_repr</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="sr_repr"><span class="id" title="lemma">sr_repr</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">i</span> <span class="id" title="var">E</span>, <a class="idref" href="Bitset.repr_op.html#machine_repr"><span class="id" title="definition">machine_repr</span></a> <a class="idref" href="Bitset.repr_op.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Bitset.repr_op.html#machine_repr"><span class="id" title="definition">machine_repr</span></a> (<span class="id" title="axiom">lsr</span> <a class="idref" href="Bitset.repr_op.html#i"><span class="id" title="variable">i</span></a> <span class="id" title="axiom">one</span>) <span class="id" title="notation">[</span><span class="id" title="notation">set</span> <span class="id" title="var">i</span> <span class="id" title="notation">:</span> <span class="id" title="notation">'</span><span class="id" title="notation">I_wordsize</span> <span class="id" title="notation">|</span> <a class="idref" href="Bitset.repr_op.html#i"><span class="id" title="variable">i</span></a> <span class="id" title="notation">&lt;</span> <span class="id" title="definition">wordsize</span><span class="id" title="notation">.-1</span> <span class="id" title="notation">&amp;</span> @<span class="id" title="definition">inord</span> <span class="id" title="definition">wordsize</span><span class="id" title="notation">.-1</span> <a class="idref" href="Bitset.repr_op.html#i"><span class="id" title="variable">i</span></a><span class="id" title="notation">.+1</span> <span class="id" title="notation">\</span><span class="id" title="keyword">in</span> <a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a><span class="id" title="notation">]</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ <span class="id" title="var">i</span> <span class="id" title="var">E</span> [<span class="id" title="var">bv</span> [<span class="id" title="var">r_native</span> <span class="id" title="var">r_set</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<span class="id" title="definition">shrBn</span> <span class="id" title="var">bv</span> 1); <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;× <span class="id" title="tactic">apply</span>: <span class="id" title="lemma">lsr_repr</span>⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<span class="id" title="lemma">existsP</span>; <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">apply</span>/<span class="id" title="lemma">andP</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">one_repr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">done</span>.<br/>
&nbsp;&nbsp;× <span class="id" title="var">have</span> <span class="id" title="var">H</span>: <span class="id" title="definition">wordsize</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="definition">wordsize</span><span class="id" title="notation">.-1</span><span class="id" title="notation">.+1</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">compute</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> -&gt;: <span class="id" title="notation">[</span><span class="id" title="notation">set</span> <span class="id" title="var">i0</span> <span class="id" title="notation">:</span> <span class="id" title="notation">'</span><span class="id" title="notation">I_wordsize</span> <span class="id" title="notation">|</span> <span class="id" title="var">i0</span> <span class="id" title="notation">&lt;</span> <span class="id" title="definition">wordsize</span><span class="id" title="notation">.-1</span> <span class="id" title="notation">&amp;</span> <span class="id" title="definition">inord</span> <span class="id" title="var">i0</span><span class="id" title="notation">.+1</span> <span class="id" title="notation">\</span><span class="id" title="keyword">in</span> <span class="id" title="var">E</span><span class="id" title="notation">]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="notation">[</span><span class="id" title="notation">set</span> <span class="id" title="var">i0</span> <span class="id" title="notation">:</span> <span class="id" title="notation">'</span><span class="id" title="notation">I_wordsize</span> <span class="id" title="notation">|</span> <span class="id" title="var">i0</span> <span class="id" title="notation">&lt;</span> <span class="id" title="definition">wordsize</span><span class="id" title="notation">.-1</span> <span class="id" title="notation">&amp;</span> <span class="id" title="definition">cast_ord</span> <span class="id" title="var">H</span> (<span class="id" title="definition">inord</span> <span class="id" title="var">i0</span><span class="id" title="notation">.+1</span>) <span class="id" title="notation">\</span><span class="id" title="keyword">in</span> <span class="id" title="var">E</span><span class="id" title="notation">]</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="lemma">setP</span> /<span class="id" title="definition">eq_mem</span>⇒ <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<span class="id" title="lemma">in_set</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> -&gt;: <span class="id" title="definition">cast_ord</span> <span class="id" title="var">H</span> (<span class="id" title="definition">inord</span> <span class="id" title="var">x</span><span class="id" title="notation">.+1</span>) <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="definition">inord</span> <span class="id" title="var">x</span><span class="id" title="notation">.+1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">ord_inj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="Bitset.props.bineqs.html#nat_cast_ord"><span class="id" title="lemma">nat_cast_ord</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Bitset.ops.shift.html#sr_repr"><span class="id" title="lemma">shift.sr_repr</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab19"></a><h2 class="section">Complement</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a name="compl"><span class="id" title="definition">compl</span></a> (<span class="id" title="var">bs</span>: <span class="id" title="axiom">Int</span>): <span class="id" title="axiom">Int</span><br/>
&nbsp;&nbsp;:= <span class="id" title="axiom">lnot</span> <a class="idref" href="Bitset.repr_op.html#bs"><span class="id" title="variable">bs</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="compl_repr"><span class="id" title="lemma">compl_repr</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">i</span> <span class="id" title="var">E</span>, <a class="idref" href="Bitset.repr_op.html#machine_repr"><span class="id" title="definition">machine_repr</span></a> <a class="idref" href="Bitset.repr_op.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Bitset.repr_op.html#machine_repr"><span class="id" title="definition">machine_repr</span></a> (<a class="idref" href="Bitset.repr_op.html#compl"><span class="id" title="definition">compl</span></a> <a class="idref" href="Bitset.repr_op.html#i"><span class="id" title="variable">i</span></a>) (<span class="id" title="notation">~:</span> <a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ <span class="id" title="var">i</span> <span class="id" title="var">E</span> [<span class="id" title="var">bv</span> [<span class="id" title="var">r_native</span> <span class="id" title="var">r_set</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<span class="id" title="definition">invB</span> <span class="id" title="var">bv</span>); <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> /<a class="idref" href="Bitset.repr_op.html#compl"><span class="id" title="definition">compl</span></a>; <span class="id" title="tactic">apply</span> <span class="id" title="lemma">lnot_repr</span> ⇒ //.<br/>
&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> <a class="idref" href="Bitset.ops.compl.html#compl_repr"><span class="id" title="lemma">compl.compl_repr</span></a> ⇒ //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab20"></a><h2 class="section">Set creation</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a name="create"><span class="id" title="definition">create</span></a> (<span class="id" title="var">b</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>): <span class="id" title="axiom">Int</span><br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">if</span> <a class="idref" href="Bitset.repr_op.html#b"><span class="id" title="variable">b</span></a> <span class="id" title="keyword">then</span> <span class="id" title="axiom">dec</span> (<a class="idref" href="Bitset.repr_op.html#toInt"><span class="id" title="axiom">toInt</span></a> 0) <span class="id" title="keyword">else</span> <span class="id" title="notation">(</span><a class="idref" href="Bitset.repr_op.html#toInt"><span class="id" title="axiom">toInt</span></a> 0<span class="id" title="notation">)</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="create_repr"><span class="id" title="lemma">create_repr</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">b</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Bitset.repr_op.html#machine_repr"><span class="id" title="definition">machine_repr</span></a> (<a class="idref" href="Bitset.repr_op.html#create"><span class="id" title="definition">create</span></a> <a class="idref" href="Bitset.repr_op.html#b"><span class="id" title="variable">b</span></a>) (<span class="id" title="keyword">if</span> <a class="idref" href="Bitset.repr_op.html#b"><span class="id" title="variable">b</span></a> <span class="id" title="keyword">then</span> <span class="id" title="notation">[</span> <span class="id" title="notation">set</span> <span class="id" title="notation">:</span> <span class="id" title="notation">'</span><span class="id" title="notation">I_wordsize</span> <span class="id" title="notation">]</span> <span class="id" title="keyword">else</span> <span class="id" title="definition">set0</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<a class="idref" href="Bitset.ops.create.html#create"><span class="id" title="definition">create.create</span></a> <span class="id" title="var">b</span>). <span class="id" title="tactic">split</span>; <span class="id" title="var">last</span> <span class="id" title="tactic">first</span>.<br/>
&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> <a class="idref" href="Bitset.ops.create.html#create_repr"><span class="id" title="lemma">create.create_repr</span></a> ⇒ //.<br/>
&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> /<a class="idref" href="Bitset.repr_op.html#create"><span class="id" title="definition">create</span></a>/<a class="idref" href="Bitset.ops.create.html#create"><span class="id" title="definition">create.create</span></a>; <span class="id" title="tactic">case</span>: <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;Case:&nbsp;b&nbsp;~&nbsp;true&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">dec_repr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="Bitset.repr_op.html#toInt_def"><span class="id" title="axiom">toInt_def</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<span class="id" title="axiom">eqIntP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;Case:&nbsp;b&nbsp;~&nbsp;false&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="Bitset.repr_op.html#toInt_def"><span class="id" title="axiom">toInt_def</span></a>; <span class="id" title="tactic">apply</span>/<span class="id" title="axiom">eqIntP</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab21"></a><h2 class="section">Querying</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a name="get"><span class="id" title="definition">get</span></a> (<span class="id" title="var">bs</span>: <span class="id" title="axiom">Int</span>) (<span class="id" title="var">k</span>: <span class="id" title="notation">'</span><span class="id" title="notation">I_wordsize</span>): <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><br/>
&nbsp;&nbsp;:= <span class="id" title="axiom">eq</span> (<span class="id" title="axiom">land</span> (<span class="id" title="axiom">lsr</span> <a class="idref" href="Bitset.repr_op.html#bs"><span class="id" title="variable">bs</span></a> (<a class="idref" href="Bitset.repr_op.html#toInt"><span class="id" title="axiom">toInt</span></a> <a class="idref" href="Bitset.repr_op.html#k"><span class="id" title="variable">k</span></a>)) <span class="id" title="axiom">one</span>) <span class="id" title="axiom">one</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="get_repr"><span class="id" title="lemma">get_repr</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">i</span> <span class="id" title="var">E</span> (<span class="id" title="var">k</span>: <span class="id" title="notation">'</span><span class="id" title="notation">I_wordsize</span>), <a class="idref" href="Bitset.repr_op.html#machine_repr"><span class="id" title="definition">machine_repr</span></a> <a class="idref" href="Bitset.repr_op.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Bitset.repr_op.html#get"><span class="id" title="definition">get</span></a> <a class="idref" href="Bitset.repr_op.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="Bitset.repr_op.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="Bitset.repr_op.html#k"><span class="id" title="variable">k</span></a> <span class="id" title="notation">\</span><span class="id" title="keyword">in</span> <a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ <span class="id" title="var">i</span> <span class="id" title="var">E</span> <span class="id" title="var">k</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="Bitset.repr_op.html#get"><span class="id" title="definition">get</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">H</span>⇒ [<span class="id" title="var">bv</span> [<span class="id" title="var">Hbv1</span> <span class="id" title="var">Hbv2</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="lemma">axioms32.eq_repr</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="definition">andB</span> (<span class="id" title="definition">shrBn</span> <span class="id" title="var">bv</span> <span class="id" title="var">k</span>) <span class="id" title="notation">#</span>1) <span class="id" title="notation">#</span>1);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">last</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">one_repr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Bitset.ops.get.html#get_repr"><span class="id" title="lemma">get.get_repr</span></a>⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">land_repr</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">last</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">one_repr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">lsr_repr</span>⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="lemma">leq_trans</span> (<span class="id" title="var">n</span> := <span class="id" title="var">k</span><span class="id" title="notation">.+1</span>))=&gt; //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<span class="id" title="lemma">existsP</span>; <span class="id" title="tactic">∃</span> <span class="id" title="notation">#</span> <span class="id" title="notation">(</span><span class="id" title="var">k</span><span class="id" title="notation">)</span>; <span class="id" title="tactic">apply</span>/<span class="id" title="lemma">andP</span>; <span class="id" title="tactic">split</span>⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Bitset.repr_op.html#toInt_def"><span class="id" title="axiom">toInt_def</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>/<span class="id" title="axiom">eqIntP</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab22"></a><h2 class="section">Intersection</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a name="inter"><span class="id" title="definition">inter</span></a> (<span class="id" title="var">bs</span>: <span class="id" title="axiom">Int</span>) (<span class="id" title="var">bs'</span>: <span class="id" title="axiom">Int</span>): <span class="id" title="axiom">Int</span><br/>
&nbsp;&nbsp;:= <span class="id" title="axiom">land</span> <a class="idref" href="Bitset.repr_op.html#bs"><span class="id" title="variable">bs</span></a> <a class="idref" href="Bitset.repr_op.html#bs'"><span class="id" title="variable">bs'</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="inter_repr"><span class="id" title="lemma">inter_repr</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">i</span> <span class="id" title="var">i'</span> <span class="id" title="var">E</span> <span class="id" title="var">E'</span>, <a class="idref" href="Bitset.repr_op.html#machine_repr"><span class="id" title="definition">machine_repr</span></a> <a class="idref" href="Bitset.repr_op.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Bitset.repr_op.html#machine_repr"><span class="id" title="definition">machine_repr</span></a> <a class="idref" href="Bitset.repr_op.html#i'"><span class="id" title="variable">i'</span></a> <a class="idref" href="Bitset.repr_op.html#E'"><span class="id" title="variable">E'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Bitset.repr_op.html#machine_repr"><span class="id" title="definition">machine_repr</span></a> (<a class="idref" href="Bitset.repr_op.html#inter"><span class="id" title="definition">inter</span></a> <a class="idref" href="Bitset.repr_op.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="Bitset.repr_op.html#i'"><span class="id" title="variable">i'</span></a>) (<a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">:&amp;:</span> <a class="idref" href="Bitset.repr_op.html#E'"><span class="id" title="variable">E'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ <span class="id" title="var">i</span> <span class="id" title="var">i'</span> <span class="id" title="var">E</span> <span class="id" title="var">E'</span> <span class="id" title="var">H</span> <span class="id" title="var">H'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="Bitset.repr_op.html#machine_repr"><span class="id" title="definition">machine_repr</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">H</span>⇒ [<span class="id" title="var">bv</span> [<span class="id" title="var">Hbv1</span> <span class="id" title="var">Hbv2</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">H'</span>⇒ [<span class="id" title="var">bv'</span> [<span class="id" title="var">Hbv'1</span> <span class="id" title="var">Hbv'2</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<a class="idref" href="Bitset.ops.inter.html#inter"><span class="id" title="definition">inter.inter</span></a> <span class="id" title="var">bv</span> <span class="id" title="var">bv'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">land_repr</span>⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="Bitset.ops.inter.html#inter_repr"><span class="id" title="lemma">inter.inter_repr</span></a> <span class="id" title="var">_</span> <span class="id" title="var">bv</span> <span class="id" title="var">bv'</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab23"></a><h2 class="section">Minimal element</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a name="keep_min"><span class="id" title="definition">keep_min</span></a> (<span class="id" title="var">bs</span>: <span class="id" title="axiom">Int</span>): <span class="id" title="axiom">Int</span><br/>
&nbsp;&nbsp;:= <span class="id" title="axiom">land</span> <a class="idref" href="Bitset.repr_op.html#bs"><span class="id" title="variable">bs</span></a> (<span class="id" title="axiom">neg</span> <a class="idref" href="Bitset.repr_op.html#bs"><span class="id" title="variable">bs</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="keep_min_repr"><span class="id" title="lemma">keep_min_repr</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">i</span> <span class="id" title="var">E</span> <span class="id" title="var">x</span>, <a class="idref" href="Bitset.repr_op.html#machine_repr"><span class="id" title="definition">machine_repr</span></a> <a class="idref" href="Bitset.repr_op.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Bitset.repr_op.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="keyword">in</span> <a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Bitset.repr_op.html#machine_repr"><span class="id" title="definition">machine_repr</span></a> (<a class="idref" href="Bitset.repr_op.html#keep_min"><span class="id" title="definition">keep_min</span></a> <a class="idref" href="Bitset.repr_op.html#i"><span class="id" title="variable">i</span></a>) <span class="id" title="notation">[</span><span class="id" title="notation">set</span> <span class="id" title="notation">[</span><span class="id" title="notation">arg</span> <span class="id" title="notation">min_</span><span class="id" title="notation">(</span><span class="id" title="var">k</span> <span class="id" title="notation">&lt;</span> <a class="idref" href="Bitset.repr_op.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="keyword">in</span> <a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a><span class="id" title="notation">)</span> <span class="id" title="var">k</span><span class="id" title="notation">]</span><span class="id" title="notation">]</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ <span class="id" title="var">i</span> <span class="id" title="var">E</span> <span class="id" title="var">x</span> <span class="id" title="var">H</span> <span class="id" title="var">Hx</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">H</span>⇒ [<span class="id" title="var">bv</span> [<span class="id" title="var">Hbv1</span> <span class="id" title="var">Hbv2</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<a class="idref" href="Bitset.ops.keep_min.html#keep_min"><span class="id" title="definition">keep_min.keep_min</span></a> <span class="id" title="var">bv</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">land_repr</span>⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">neg_repr</span>⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Bitset.ops.keep_min.html#keep_min_repr"><span class="id" title="lemma">keep_min.keep_min_repr</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab24"></a><h2 class="section">Insertion</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a name="set"><span class="id" title="definition">set</span></a> (<span class="id" title="var">bs</span>: <span class="id" title="axiom">Int</span>) <span class="id" title="var">k</span> (<span class="id" title="var">b</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>): <span class="id" title="axiom">Int</span><br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">if</span> <a class="idref" href="Bitset.repr_op.html#b"><span class="id" title="variable">b</span></a> <span class="id" title="keyword">then</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="axiom">lor</span> <a class="idref" href="Bitset.repr_op.html#bs"><span class="id" title="variable">bs</span></a> (<span class="id" title="axiom">lsl</span> (<a class="idref" href="Bitset.repr_op.html#toInt"><span class="id" title="axiom">toInt</span></a> 1) <a class="idref" href="Bitset.repr_op.html#k"><span class="id" title="variable">k</span></a>) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="axiom">land</span> <a class="idref" href="Bitset.repr_op.html#bs"><span class="id" title="variable">bs</span></a> (<span class="id" title="axiom">lnot</span> (<span class="id" title="axiom">lsl</span> (<a class="idref" href="Bitset.repr_op.html#toInt"><span class="id" title="axiom">toInt</span></a> 1) <a class="idref" href="Bitset.repr_op.html#k"><span class="id" title="variable">k</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="set_repr"><span class="id" title="lemma">set_repr</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">i</span> (<span class="id" title="var">k</span>: <span class="id" title="notation">'</span><span class="id" title="notation">I_wordsize</span>) (<span class="id" title="var">b</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) <span class="id" title="var">E</span>, <a class="idref" href="Bitset.repr_op.html#machine_repr"><span class="id" title="definition">machine_repr</span></a> <a class="idref" href="Bitset.repr_op.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Bitset.repr_op.html#machine_repr"><span class="id" title="definition">machine_repr</span></a> (<a class="idref" href="Bitset.repr_op.html#set"><span class="id" title="definition">set</span></a> <a class="idref" href="Bitset.repr_op.html#i"><span class="id" title="variable">i</span></a> (<a class="idref" href="Bitset.repr_op.html#toInt"><span class="id" title="axiom">toInt</span></a> <a class="idref" href="Bitset.repr_op.html#k"><span class="id" title="variable">k</span></a>) <a class="idref" href="Bitset.repr_op.html#b"><span class="id" title="variable">b</span></a>) (<span class="id" title="keyword">if</span> <a class="idref" href="Bitset.repr_op.html#b"><span class="id" title="variable">b</span></a> <span class="id" title="keyword">then</span> <span class="id" title="notation">(</span><a class="idref" href="Bitset.repr_op.html#k"><span class="id" title="variable">k</span></a> <span class="id" title="notation">|:</span> <a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a><span class="id" title="notation">)</span> <span class="id" title="keyword">else</span> <span class="id" title="notation">(</span><a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">:\</span> <a class="idref" href="Bitset.repr_op.html#k"><span class="id" title="variable">k</span></a><span class="id" title="notation">)</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ <span class="id" title="var">i</span> <span class="id" title="var">k</span> <span class="id" title="var">b</span> <span class="id" title="var">E</span> [<span class="id" title="var">bv</span> [<span class="id" title="var">Hbv1</span> <span class="id" title="var">Hbv2</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<a class="idref" href="Bitset.ops.set.html#set"><span class="id" title="definition">set.set</span></a> <span class="id" title="var">bv</span> <span class="id" title="var">k</span> <span class="id" title="var">b</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="Bitset.repr_op.html#set"><span class="id" title="definition">set</span></a> /<a class="idref" href="Bitset.ops.set.html#set"><span class="id" title="definition">set.set</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span>: <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">lor_repr</span>⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">lsl_repr</span>⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="lemma">leq_trans</span> (<span class="id" title="var">n</span> := <span class="id" title="var">k</span><span class="id" title="notation">.+1</span>))=&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="Bitset.repr_op.html#toInt_def"><span class="id" title="axiom">toInt_def</span></a>; <span class="id" title="tactic">apply</span>/<span class="id" title="axiom">eqIntP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="Bitset.repr_op.html#toInt_def"><span class="id" title="axiom">toInt_def</span></a>; <span class="id" title="tactic">apply</span>/<span class="id" title="lemma">existsP</span>; <span class="id" title="tactic">∃</span> <span class="id" title="notation">#</span> <span class="id" title="notation">(</span><span class="id" title="var">k</span><span class="id" title="notation">)</span>; <span class="id" title="tactic">apply</span>/<span class="id" title="lemma">andP</span>; <span class="id" title="tactic">split</span>⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>/<span class="id" title="axiom">eqIntP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">land_repr</span>⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">lnot_repr</span>⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">lsl_repr</span>⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="lemma">leq_trans</span> (<span class="id" title="var">n</span> := <span class="id" title="var">k</span><span class="id" title="notation">.+1</span>))=&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="Bitset.repr_op.html#toInt_def"><span class="id" title="axiom">toInt_def</span></a>; <span class="id" title="tactic">apply</span>/<span class="id" title="axiom">eqIntP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Bitset.repr_op.html#toInt_def"><span class="id" title="axiom">toInt_def</span></a>; <span class="id" title="tactic">apply</span>/<span class="id" title="lemma">existsP</span>; <span class="id" title="tactic">∃</span> <span class="id" title="notation">#</span> <span class="id" title="notation">(</span><span class="id" title="var">k</span><span class="id" title="notation">)</span>; <span class="id" title="tactic">apply</span>/<span class="id" title="lemma">andP</span>; <span class="id" title="tactic">split</span>⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>/<span class="id" title="axiom">eqIntP</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Bitset.ops.set.html#set_repr"><span class="id" title="lemma">set.set_repr</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab25"></a><h2 class="section">Symmetrical difference</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a name="symdiff"><span class="id" title="definition">symdiff</span></a> (<span class="id" title="var">bs</span>: <span class="id" title="axiom">Int</span>) (<span class="id" title="var">bs'</span>: <span class="id" title="axiom">Int</span>): <span class="id" title="axiom">Int</span><br/>
&nbsp;&nbsp;:= <span class="id" title="axiom">lxor</span> <a class="idref" href="Bitset.repr_op.html#bs"><span class="id" title="variable">bs</span></a> <a class="idref" href="Bitset.repr_op.html#bs'"><span class="id" title="variable">bs'</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="symdiff_repr"><span class="id" title="lemma">symdiff_repr</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">i</span> <span class="id" title="var">i'</span> <span class="id" title="var">E</span> <span class="id" title="var">E'</span>, <a class="idref" href="Bitset.repr_op.html#machine_repr"><span class="id" title="definition">machine_repr</span></a> <a class="idref" href="Bitset.repr_op.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Bitset.repr_op.html#machine_repr"><span class="id" title="definition">machine_repr</span></a> <a class="idref" href="Bitset.repr_op.html#i'"><span class="id" title="variable">i'</span></a> <a class="idref" href="Bitset.repr_op.html#E'"><span class="id" title="variable">E'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Bitset.repr_op.html#machine_repr"><span class="id" title="definition">machine_repr</span></a> (<a class="idref" href="Bitset.repr_op.html#symdiff"><span class="id" title="definition">symdiff</span></a> <a class="idref" href="Bitset.repr_op.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="Bitset.repr_op.html#i'"><span class="id" title="variable">i'</span></a>) (<span class="id" title="notation">(</span><a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">:\:</span> <a class="idref" href="Bitset.repr_op.html#E'"><span class="id" title="variable">E'</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">:|:</span> <span class="id" title="notation">(</span><a class="idref" href="Bitset.repr_op.html#E'"><span class="id" title="variable">E'</span></a> <span class="id" title="notation">:\:</span> <a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a><span class="id" title="notation">)</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ <span class="id" title="var">i</span> <span class="id" title="var">i'</span> <span class="id" title="var">E</span> <span class="id" title="var">E'</span> [<span class="id" title="var">bv</span> [<span class="id" title="var">Hbv1</span> <span class="id" title="var">Hbv2</span>]] [<span class="id" title="var">bv'</span> [<span class="id" title="var">Hbv'1</span> <span class="id" title="var">Hbv'2</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<a class="idref" href="Bitset.ops.symdiff.html#symdiff"><span class="id" title="definition">symdiff.symdiff</span></a> <span class="id" title="var">bv</span> <span class="id" title="var">bv'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">lxor_repr</span>⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Bitset.ops.symdiff.html#symdiff_repr"><span class="id" title="lemma">symdiff.symdiff_repr</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab26"></a><h2 class="section">Union</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a name="union"><span class="id" title="definition">union</span></a> (<span class="id" title="var">bs</span>: <span class="id" title="axiom">Int</span>) (<span class="id" title="var">bs'</span>: <span class="id" title="axiom">Int</span>): <span class="id" title="axiom">Int</span><br/>
&nbsp;&nbsp;:= <span class="id" title="axiom">lor</span> <a class="idref" href="Bitset.repr_op.html#bs"><span class="id" title="variable">bs</span></a> <a class="idref" href="Bitset.repr_op.html#bs'"><span class="id" title="variable">bs'</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="union_repr"><span class="id" title="lemma">union_repr</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">i</span> <span class="id" title="var">i'</span> <span class="id" title="var">E</span> <span class="id" title="var">E'</span>, <a class="idref" href="Bitset.repr_op.html#machine_repr"><span class="id" title="definition">machine_repr</span></a> <a class="idref" href="Bitset.repr_op.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Bitset.repr_op.html#machine_repr"><span class="id" title="definition">machine_repr</span></a> <a class="idref" href="Bitset.repr_op.html#i'"><span class="id" title="variable">i'</span></a> <a class="idref" href="Bitset.repr_op.html#E'"><span class="id" title="variable">E'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Bitset.repr_op.html#machine_repr"><span class="id" title="definition">machine_repr</span></a> (<a class="idref" href="Bitset.repr_op.html#union"><span class="id" title="definition">union</span></a> <a class="idref" href="Bitset.repr_op.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="Bitset.repr_op.html#i'"><span class="id" title="variable">i'</span></a>) (<a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">:|:</span> <a class="idref" href="Bitset.repr_op.html#E'"><span class="id" title="variable">E'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ <span class="id" title="var">i</span> <span class="id" title="var">i'</span> <span class="id" title="var">E</span> <span class="id" title="var">E'</span> [<span class="id" title="var">bv</span> [<span class="id" title="var">Hbv1</span> <span class="id" title="var">Hbv2</span>]] [<span class="id" title="var">bv'</span> [<span class="id" title="var">Hbv'1</span> <span class="id" title="var">Hbv'2</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<a class="idref" href="Bitset.ops.union.html#union"><span class="id" title="definition">union.union</span></a> <span class="id" title="var">bv</span> <span class="id" title="var">bv'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">lor_repr</span>⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Bitset.ops.union.html#union_repr"><span class="id" title="lemma">union.union_repr</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab27"></a><h2 class="section">Subset</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="subset_repr"><span class="id" title="lemma">subset_repr</span></a>: <span class="id" title="keyword">∀</span> (<span class="id" title="var">bs</span> <span class="id" title="var">bs'</span>: <span class="id" title="axiom">Int</span>) <span class="id" title="var">E</span> <span class="id" title="var">E'</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="Bitset.repr_op.html#machine_repr"><span class="id" title="definition">machine_repr</span></a> <a class="idref" href="Bitset.repr_op.html#bs"><span class="id" title="variable">bs</span></a> <a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Bitset.repr_op.html#machine_repr"><span class="id" title="definition">machine_repr</span></a> <a class="idref" href="Bitset.repr_op.html#bs'"><span class="id" title="variable">bs'</span></a> <a class="idref" href="Bitset.repr_op.html#E'"><span class="id" title="variable">E'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><span class="id" title="axiom">eq</span> (<span class="id" title="axiom">land</span> <a class="idref" href="Bitset.repr_op.html#bs"><span class="id" title="variable">bs</span></a> <a class="idref" href="Bitset.repr_op.html#bs'"><span class="id" title="variable">bs'</span></a>) <a class="idref" href="Bitset.repr_op.html#bs"><span class="id" title="variable">bs</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">\</span><span class="id" title="notation">subset</span> <a class="idref" href="Bitset.repr_op.html#E'"><span class="id" title="variable">E'</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ <span class="id" title="var">bs</span> <span class="id" title="var">bs'</span> <span class="id" title="var">E</span> <span class="id" title="var">E'</span> <span class="id" title="var">HE</span> <span class="id" title="var">HE'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Bitset.repr_op.html#eq_repr"><span class="id" title="lemma">eq_repr</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">E</span> <span class="id" title="notation">:&amp;:</span> <span class="id" title="var">E'</span>) <span class="id" title="var">E</span>)=&gt; //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<span class="id" title="lemma">eqP</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span>: <span class="id" title="lemma">setIidPl</span>⇒ //=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="Bitset.repr_op.html#inter_repr"><span class="id" title="lemma">inter_repr</span></a>⇒ //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab28"></a><h2 class="section">Cardinality</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <a name="fromInt_inj"><span class="id" title="lemma">fromInt_inj</span></a>: <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>,<br/>
&nbsp;&nbsp;<a class="idref" href="Bitset.repr_op.html#fromInt"><span class="id" title="axiom">fromInt</span></a> <a class="idref" href="Bitset.repr_op.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Bitset.repr_op.html#fromInt"><span class="id" title="axiom">fromInt</span></a> <a class="idref" href="Bitset.repr_op.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Bitset.repr_op.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="Bitset.repr_op.html#y"><span class="id" title="variable">y</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="Bitset.repr_op.html#fromInt_def"><span class="id" title="axiom">fromInt_def</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="definition">toNat_inj</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="lemma">bitsFromInt_inj</span> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <a name="Int_as_OT"><span class="id" title="module">Int_as_OT</span></a> &lt;: <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Structures.OrderedType.html#OrderedType"><span class="id" title="module">OrderedType</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Int_as_OT.t"><span class="id" title="definition">t</span></a> := <span class="id" title="axiom">Int</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Int_as_OT.eq"><span class="id" title="definition">eq</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="keyword">Prop</span> := <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="Bitset.repr_op.html#Int_as_OT.fromInt"><span class="id" title="axiom">fromInt</span></a> <a class="idref" href="Bitset.repr_op.html#x"><span class="id" title="variable">x</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">(</span></a><a class="idref" href="Bitset.repr_op.html#Int_as_OT.fromInt"><span class="id" title="axiom">fromInt</span></a> <a class="idref" href="Bitset.repr_op.html#y"><span class="id" title="variable">y</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Int_as_OT.lt"><span class="id" title="definition">lt</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="keyword">Prop</span> := <span class="id" title="notation">(</span><a class="idref" href="Bitset.repr_op.html#Int_as_OT.fromInt"><span class="id" title="axiom">fromInt</span></a> <a class="idref" href="Bitset.repr_op.html#x"><span class="id" title="variable">x</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">&lt;</span> <span class="id" title="notation">(</span><a class="idref" href="Bitset.repr_op.html#Int_as_OT.fromInt"><span class="id" title="axiom">fromInt</span></a> <a class="idref" href="Bitset.repr_op.html#y"><span class="id" title="variable">y</span></a><span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Int_as_OT.eq_refl"><span class="id" title="definition">eq_refl</span></a> <span class="id" title="var">x</span> := @<a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">Logic.eq_refl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> (<a class="idref" href="Bitset.repr_op.html#Int_as_OT.fromInt"><span class="id" title="axiom">fromInt</span></a> <a class="idref" href="Bitset.repr_op.html#x"><span class="id" title="variable">x</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Int_as_OT.eq_sym"><span class="id" title="definition">eq_sym</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span> := @<a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#eq_sym"><span class="id" title="lemma">Logic.eq_sym</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> (<a class="idref" href="Bitset.repr_op.html#Int_as_OT.fromInt"><span class="id" title="axiom">fromInt</span></a> <a class="idref" href="Bitset.repr_op.html#x"><span class="id" title="variable">x</span></a>) (<a class="idref" href="Bitset.repr_op.html#Int_as_OT.fromInt"><span class="id" title="axiom">fromInt</span></a> <a class="idref" href="Bitset.repr_op.html#y"><span class="id" title="variable">y</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Int_as_OT.eq_trans"><span class="id" title="definition">eq_trans</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> := @<a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#eq_trans"><span class="id" title="lemma">Logic.eq_trans</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> (<a class="idref" href="Bitset.repr_op.html#Int_as_OT.fromInt"><span class="id" title="axiom">fromInt</span></a> <a class="idref" href="Bitset.repr_op.html#x"><span class="id" title="variable">x</span></a>) (<a class="idref" href="Bitset.repr_op.html#Int_as_OT.fromInt"><span class="id" title="axiom">fromInt</span></a> <a class="idref" href="Bitset.repr_op.html#y"><span class="id" title="variable">y</span></a>) (<a class="idref" href="Bitset.repr_op.html#Int_as_OT.fromInt"><span class="id" title="axiom">fromInt</span></a> <a class="idref" href="Bitset.repr_op.html#z"><span class="id" title="variable">z</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="Int_as_OT.lt_trans"><span class="id" title="lemma">lt_trans</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <a class="idref" href="Bitset.repr_op.html#Int_as_OT.t"><span class="id" title="definition">t</span></a>, <a class="idref" href="Bitset.repr_op.html#Int_as_OT.lt"><span class="id" title="definition">lt</span></a> <a class="idref" href="Bitset.repr_op.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Bitset.repr_op.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Bitset.repr_op.html#Int_as_OT.lt"><span class="id" title="definition">lt</span></a> <a class="idref" href="Bitset.repr_op.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="Bitset.repr_op.html#z"><span class="id" title="variable">z</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Bitset.repr_op.html#Int_as_OT.lt"><span class="id" title="definition">lt</span></a> <a class="idref" href="Bitset.repr_op.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Bitset.repr_op.html#z"><span class="id" title="variable">z</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="Bitset.repr_op.html#Int_as_OT.lt"><span class="id" title="definition">lt</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="lemma">ltn_trans</span> (<span class="id" title="var">n</span> := <a class="idref" href="Bitset.repr_op.html#Int_as_OT.fromInt"><span class="id" title="axiom">fromInt</span></a> <span class="id" title="var">y</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="Int_as_OT.lt_not_eq"><span class="id" title="lemma">lt_not_eq</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <a class="idref" href="Bitset.repr_op.html#Int_as_OT.t"><span class="id" title="definition">t</span></a>, <a class="idref" href="Bitset.repr_op.html#Int_as_OT.lt"><span class="id" title="definition">lt</span></a> <a class="idref" href="Bitset.repr_op.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Bitset.repr_op.html#y"><span class="id" title="variable">y</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a> <a class="idref" href="Bitset.repr_op.html#Int_as_OT.eq"><span class="id" title="definition">eq</span></a> <a class="idref" href="Bitset.repr_op.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Bitset.repr_op.html#y"><span class="id" title="variable">y</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="Bitset.repr_op.html#Int_as_OT.lt"><span class="id" title="definition">lt</span></a> <span class="id" title="keyword">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ <span class="id" title="var">Habs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<span class="id" title="lemma">eqP</span>: <span class="id" title="var">Habs</span>⇒ <span class="id" title="var">Habs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">ltn_eqF</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Habs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Int_as_OT.compare"><span class="id" title="definition">compare</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Structures.OrderedType.html#Compare"><span class="id" title="inductive">Compare</span></a> <a class="idref" href="Bitset.repr_op.html#Int_as_OT.lt"><span class="id" title="definition">lt</span></a> <a class="idref" href="Bitset.repr_op.html#Int_as_OT.eq"><span class="id" title="definition">eq</span></a> <a class="idref" href="Bitset.repr_op.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Bitset.repr_op.html#y"><span class="id" title="variable">y</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_eq</span> (<a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Arith.Compare_dec.html#nat_compare"><span class="id" title="abbreviation">nat_compare</span></a> (<a class="idref" href="Bitset.repr_op.html#Int_as_OT.fromInt"><span class="id" title="axiom">fromInt</span></a> <span class="id" title="var">x</span>) (<a class="idref" href="Bitset.repr_op.html#Int_as_OT.fromInt"><span class="id" title="axiom">fromInt</span></a> <span class="id" title="var">y</span>)); <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Structures.OrderedType.html#EQ"><span class="id" title="constructor">EQ</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Arith.Compare_dec.html#nat_compare_eq"><span class="id" title="lemma">nat_compare_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Structures.OrderedType.html#LT"><span class="id" title="constructor">LT</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<span class="id" title="lemma">ltP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Arith.Compare_dec.html#nat_compare_Lt_lt"><span class="id" title="lemma">nat_compare_Lt_lt</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Structures.OrderedType.html#GT"><span class="id" title="constructor">GT</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<span class="id" title="lemma">ltP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Arith.Compare_dec.html#nat_compare_Gt_gt"><span class="id" title="lemma">nat_compare_Gt_gt</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Int_as_OT.eq_dec"><span class="id" title="definition">eq_dec</span></a> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <a class="idref" href="Bitset.repr_op.html#Int_as_OT.t"><span class="id" title="definition">t</span></a>, <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">{</span></a><a class="idref" href="Bitset.repr_op.html#Int_as_OT.eq"><span class="id" title="definition">eq</span></a> <a class="idref" href="Bitset.repr_op.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Bitset.repr_op.html#y"><span class="id" title="variable">y</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">+</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">{</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#611abc97cba304de784fa909dbdea1fa"><span class="id" title="notation">¬</span></a> <a class="idref" href="Bitset.repr_op.html#Int_as_OT.eq"><span class="id" title="definition">eq</span></a> <a class="idref" href="Bitset.repr_op.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Bitset.repr_op.html#y"><span class="id" title="variable">y</span></a><a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Specif.html#5bf2050e90b21ebc82dc5463d1ba338e"><span class="id" title="notation">}</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ <span class="id" title="var">x</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Arith.Peano_dec.html#eq_nat_dec"><span class="id" title="abbreviation">eq_nat_dec</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Bitset.repr_op.html#Int_as_OT"><span class="id" title="module">Int_as_OT</span></a>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <a name="M"><span class="id" title="module">M</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.FSets.FMapList.html#Make"><span class="id" title="module">FMapList.Make</span></a>(<a class="idref" href="Bitset.repr_op.html#Int_as_OT"><span class="id" title="module">Int_as_OT</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="tableSize"><span class="id" title="definition">tableSize</span></a> := 4.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="pop_tableAux"><span class="id" title="definition">pop_tableAux</span></a> (<span class="id" title="var">i</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<span class="id" title="var">m</span>: <a class="idref" href="Bitset.repr_op.html#M.t"><span class="id" title="definition">M.t</span></a> <span class="id" title="axiom">Int</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Bitset.repr_op.html#i"><span class="id" title="variable">i</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| 0 ⇒ <a class="idref" href="Bitset.repr_op.html#M.add"><span class="id" title="definition">M.add</span></a> <span class="id" title="axiom">zero</span> <span class="id" title="axiom">zero</span> <a class="idref" href="Bitset.repr_op.html#m"><span class="id" title="variable">m</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">i'</span><span class="id" title="notation">.+1</span> ⇒ <a class="idref" href="Bitset.repr_op.html#M.add"><span class="id" title="definition">M.add</span></a> (<a class="idref" href="Bitset.repr_op.html#toInt"><span class="id" title="axiom">toInt</span></a> <a class="idref" href="Bitset.repr_op.html#i"><span class="id" title="variable">i</span></a>) (<a class="idref" href="Bitset.repr_op.html#toInt"><span class="id" title="axiom">toInt</span></a> (<span class="id" title="abbreviation">count_mem</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> (<span class="id" title="definition">fromNat</span> (<span class="id" title="var">n</span> := <a class="idref" href="Bitset.repr_op.html#tableSize"><span class="id" title="definition">tableSize</span></a>) <a class="idref" href="Bitset.repr_op.html#i"><span class="id" title="variable">i</span></a>))) (<a class="idref" href="Bitset.repr_op.html#pop_tableAux"><span class="id" title="definition">pop_tableAux</span></a> <span class="id" title="var">i'</span> <a class="idref" href="Bitset.repr_op.html#m"><span class="id" title="variable">m</span></a>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="pop_table"><span class="id" title="definition">pop_table</span></a> := <a class="idref" href="Bitset.repr_op.html#pop_tableAux"><span class="id" title="definition">pop_tableAux</span></a> (2 <span class="id" title="notation">^</span> <a class="idref" href="Bitset.repr_op.html#tableSize"><span class="id" title="definition">tableSize</span></a>) (<a class="idref" href="Bitset.repr_op.html#M.empty"><span class="id" title="definition">M.empty</span></a> <span class="id" title="axiom">Int</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="pop_elem"><span class="id" title="definition">pop_elem</span></a> (<span class="id" title="var">bs</span>: <span class="id" title="axiom">Int</span>)(<span class="id" title="var">i</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>): <span class="id" title="axiom">Int</span><br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">let</span> <span class="id" title="var">x</span> := <span class="id" title="axiom">land</span> (<span class="id" title="axiom">lsr</span> <a class="idref" href="Bitset.repr_op.html#bs"><span class="id" title="variable">bs</span></a> (<a class="idref" href="Bitset.repr_op.html#toInt"><span class="id" title="axiom">toInt</span></a> (<a class="idref" href="Bitset.repr_op.html#i"><span class="id" title="variable">i</span></a> <span class="id" title="notation">×</span> <a class="idref" href="Bitset.repr_op.html#tableSize"><span class="id" title="definition">tableSize</span></a>))) <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="axiom">dec</span> (<span class="id" title="axiom">lsl</span> <span class="id" title="axiom">one</span> (<a class="idref" href="Bitset.repr_op.html#toInt"><span class="id" title="axiom">toInt</span></a> <a class="idref" href="Bitset.repr_op.html#tableSize"><span class="id" title="definition">tableSize</span></a>))) <span class="id" title="keyword">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> (<a class="idref" href="Bitset.repr_op.html#M.find"><span class="id" title="definition">M.find</span></a> <a class="idref" href="Bitset.repr_op.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Bitset.repr_op.html#pop_table"><span class="id" title="definition">pop_table</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <span class="id" title="axiom">zero</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">x</span> ⇒ <a class="idref" href="Bitset.repr_op.html#x"><span class="id" title="variable">x</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="pop_elem_repr"><span class="id" title="lemma">pop_elem_repr</span></a>: <br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">n</span> <span class="id" title="var">bs</span> <span class="id" title="var">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Bitset.repr_op.html#i"><span class="id" title="variable">i</span></a> <span class="id" title="notation">×</span> <a class="idref" href="Bitset.repr_op.html#tableSize"><span class="id" title="definition">tableSize</span></a> <span class="id" title="notation">≤</span> <span class="id" title="definition">wordsize</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">native_repr</span> <a class="idref" href="Bitset.repr_op.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="Bitset.repr_op.html#bs"><span class="id" title="variable">bs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">native_repr</span> (<a class="idref" href="Bitset.repr_op.html#pop_elem"><span class="id" title="definition">pop_elem</span></a> <a class="idref" href="Bitset.repr_op.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="Bitset.repr_op.html#i"><span class="id" title="variable">i</span></a>) (<a class="idref" href="Bitset.ops.cardinal.html#pop_elem"><span class="id" title="definition">cardinal.pop_elem</span></a> <a class="idref" href="Bitset.repr_op.html#tableSize"><span class="id" title="definition">tableSize</span></a> <a class="idref" href="Bitset.repr_op.html#bs"><span class="id" title="variable">bs</span></a> <a class="idref" href="Bitset.repr_op.html#i"><span class="id" title="variable">i</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ <span class="id" title="var">n</span> <span class="id" title="var">bs</span> <span class="id" title="var">i</span> ? ?.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="Bitset.repr_op.html#pop_elem"><span class="id" title="definition">pop_elem</span></a>/<a class="idref" href="Bitset.ops.cardinal.html#pop_elem"><span class="id" title="definition">cardinal.pop_elem</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="Bitset.ops.cardinal.html#pop_table"><span class="id" title="definition">cardinal.pop_table</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">nth_mkseq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> <span class="id" title="var">i'</span> := <span class="id" title="axiom">land</span> (<span class="id" title="axiom">lsr</span> <span class="id" title="var">n</span> (<a class="idref" href="Bitset.repr_op.html#toInt"><span class="id" title="axiom">toInt</span></a> (<span class="id" title="var">i</span> <span class="id" title="notation">×</span> <a class="idref" href="Bitset.repr_op.html#tableSize"><span class="id" title="definition">tableSize</span></a>))) (<span class="id" title="axiom">dec</span> (<span class="id" title="axiom">lsl</span> <span class="id" title="axiom">one</span> (<a class="idref" href="Bitset.repr_op.html#toInt"><span class="id" title="axiom">toInt</span></a> <a class="idref" href="Bitset.repr_op.html#tableSize"><span class="id" title="definition">tableSize</span></a>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="Bitset.repr_op.html#M.find_1"><span class="id" title="lemma">M.find_1</span></a> (<span class="id" title="var">e</span> := <a class="idref" href="Bitset.repr_op.html#toInt"><span class="id" title="axiom">toInt</span></a> (<span class="id" title="abbreviation">count_mem</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> (<span class="id" title="definition">fromNat</span> (<span class="id" title="var">n</span> := <a class="idref" href="Bitset.repr_op.html#tableSize"><span class="id" title="definition">tableSize</span></a>) (<a class="idref" href="Bitset.repr_op.html#fromInt"><span class="id" title="axiom">fromInt</span></a> <span class="id" title="var">i'</span>))))).<br/>
&nbsp;&nbsp;<span class="id" title="var">have</span> -&gt;: <a class="idref" href="Bitset.repr_op.html#fromInt"><span class="id" title="axiom">fromInt</span></a> <span class="id" title="var">i'</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="definition">toNat</span> (<span class="id" title="definition">andB</span> (<span class="id" title="definition">shrBn</span> <span class="id" title="var">bs</span> (<span class="id" title="var">i</span> <span class="id" title="notation">×</span> <a class="idref" href="Bitset.repr_op.html#tableSize"><span class="id" title="definition">tableSize</span></a>)) (<span class="id" title="definition">decB</span> (<span class="id" title="definition">shlBn</span> <span class="id" title="notation">#</span> (1) <a class="idref" href="Bitset.repr_op.html#tableSize"><span class="id" title="definition">tableSize</span></a>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Bitset.repr_op.html#fromInt_def"><span class="id" title="axiom">fromInt_def</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> -&gt;: <span class="id" title="definition">bitsFromInt</span> <span class="id" title="var">i'</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#1c39bf18749e5cc609e83c0a0ba5a372"><span class="id" title="notation">=</span></a> <span class="id" title="definition">andB</span> (<span class="id" title="definition">shrBn</span> <span class="id" title="var">bs</span> (<span class="id" title="var">i</span> <span class="id" title="notation">×</span> <a class="idref" href="Bitset.repr_op.html#tableSize"><span class="id" title="definition">tableSize</span></a>)) (<span class="id" title="definition">decB</span> (<span class="id" title="definition">shlBn</span> <span class="id" title="notation">#</span> (1) <a class="idref" href="Bitset.repr_op.html#tableSize"><span class="id" title="definition">tableSize</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<span class="id" title="lemma">eqP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="lemma">eq_adj</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">H</span>: <span class="id" title="definition">native_repr</span> <span class="id" title="var">i'</span> (<span class="id" title="definition">andB</span> (<span class="id" title="definition">shrBn</span> <span class="id" title="var">bs</span> (<span class="id" title="var">i</span> <span class="id" title="notation">×</span> <a class="idref" href="Bitset.repr_op.html#tableSize"><span class="id" title="definition">tableSize</span></a>)) (<span class="id" title="definition">decB</span> (<span class="id" title="definition">shlBn</span> <span class="id" title="notation">#</span> (1) <a class="idref" href="Bitset.repr_op.html#tableSize"><span class="id" title="definition">tableSize</span></a>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">land_repr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">lsr_repr</span>⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<span class="id" title="definition">natural_repr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<span class="id" title="lemma">existsP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="notation">#</span> <span class="id" title="notation">(</span><span class="id" title="var">i</span> <span class="id" title="notation">×</span> <a class="idref" href="Bitset.repr_op.html#tableSize"><span class="id" title="definition">tableSize</span></a><span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<span class="id" title="definition">native_repr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Bitset.repr_op.html#toInt_def"><span class="id" title="axiom">toInt_def</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">eq_refl</span> <span class="id" title="lemma">andbT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>/<span class="id" title="axiom">eqIntP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">dec_repr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">lsl_repr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">one_repr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO:&nbsp;add&nbsp;a&nbsp;lemma&nbsp;'natural_repr&nbsp;(toInt&nbsp;x)&nbsp;x'?&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<span class="id" title="definition">natural_repr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<span class="id" title="lemma">existsP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="notation">#</span><a class="idref" href="Bitset.repr_op.html#tableSize"><span class="id" title="definition">tableSize</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">eq_refl</span> <span class="id" title="lemma">andbT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<span class="id" title="definition">native_repr</span> <a class="idref" href="Bitset.repr_op.html#toInt_def"><span class="id" title="axiom">toInt_def</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span>/<span class="id" title="axiom">eqIntP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Bitset.repr_op.html#toInt_def"><span class="id" title="axiom">toInt_def</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<span class="id" title="axiom">eqIntP</span>⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="Bitset.repr_op.html#pop_table"><span class="id" title="definition">pop_table</span></a> /<a class="idref" href="Bitset.repr_op.html#pop_tableAux"><span class="id" title="definition">pop_tableAux</span></a> [<span class="id" title="var">_</span> (2<span class="id" title="notation">^</span><a class="idref" href="Bitset.repr_op.html#tableSize"><span class="id" title="definition">tableSize</span></a>) <span class="id" title="var">_</span>]/=.<br/>
&nbsp;&nbsp;<span class="id" title="var">admit</span>. <span class="comment">(*&nbsp;Trivial,&nbsp;but&nbsp;painful&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Bitset.props.bineqs.html#toNat_andB"><span class="id" title="lemma">toNat_andB</span></a>.<br/>
<span class="id" title="var">Admitted</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="popAux"><span class="id" title="definition">popAux</span></a> (<span class="id" title="var">bs</span>: <span class="id" title="axiom">Int</span>)(<span class="id" title="var">i</span>: <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>): <span class="id" title="axiom">Int</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Bitset.repr_op.html#i"><span class="id" title="variable">i</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| 0 ⇒ <span class="id" title="axiom">zero</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">i'</span><span class="id" title="notation">.+1</span> ⇒ <span class="id" title="axiom">add</span> (<a class="idref" href="Bitset.repr_op.html#pop_elem"><span class="id" title="definition">pop_elem</span></a> <a class="idref" href="Bitset.repr_op.html#bs"><span class="id" title="variable">bs</span></a> <span class="id" title="var">i'</span>) (<a class="idref" href="Bitset.repr_op.html#popAux"><span class="id" title="definition">popAux</span></a> <a class="idref" href="Bitset.repr_op.html#bs"><span class="id" title="variable">bs</span></a> <span class="id" title="var">i'</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="popAux_repr"><span class="id" title="definition">popAux_repr</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">n</span> <span class="id" title="var">bs</span> <span class="id" title="var">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Bitset.repr_op.html#i"><span class="id" title="variable">i</span></a> <span class="id" title="notation">×</span> <a class="idref" href="Bitset.repr_op.html#tableSize"><span class="id" title="definition">tableSize</span></a> <span class="id" title="notation">≤</span> <span class="id" title="definition">wordsize</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">native_repr</span> <a class="idref" href="Bitset.repr_op.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="Bitset.repr_op.html#bs"><span class="id" title="variable">bs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">native_repr</span> (<a class="idref" href="Bitset.repr_op.html#popAux"><span class="id" title="definition">popAux</span></a> <a class="idref" href="Bitset.repr_op.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="Bitset.repr_op.html#i"><span class="id" title="variable">i</span></a>) (<a class="idref" href="Bitset.ops.cardinal.html#popAux"><span class="id" title="definition">cardinal.popAux</span></a> <a class="idref" href="Bitset.repr_op.html#tableSize"><span class="id" title="definition">tableSize</span></a> <a class="idref" href="Bitset.repr_op.html#bs"><span class="id" title="variable">bs</span></a> <a class="idref" href="Bitset.repr_op.html#i"><span class="id" title="variable">i</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ <span class="id" title="var">n</span> <span class="id" title="var">bs</span> <span class="id" title="var">i</span> <span class="id" title="var">Hi</span> ?.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">elim</span>: <span class="id" title="var">i</span> <span class="id" title="var">Hi</span>⇒ [<span class="id" title="var">Hi</span> //=|<span class="id" title="var">i</span> <span class="id" title="var">IH</span> <span class="id" title="var">Hi</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="lemma">fromNat0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">axioms32.zero_repr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">Hi'</span>: <span class="id" title="var">i</span> <span class="id" title="notation">×</span> <a class="idref" href="Bitset.repr_op.html#tableSize"><span class="id" title="definition">tableSize</span></a> <span class="id" title="notation">≤</span> <span class="id" title="definition">wordsize</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="lemma">leq_trans</span> (<span class="id" title="var">n</span> := <span class="id" title="var">i</span><span class="id" title="notation">.+1</span> <span class="id" title="notation">×</span> <a class="idref" href="Bitset.repr_op.html#tableSize"><span class="id" title="definition">tableSize</span></a>))=&gt; //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">leq_pmul2r</span>⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">add_repr</span>⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="Bitset.repr_op.html#pop_elem_repr"><span class="id" title="axiom">pop_elem_repr</span></a> <span class="id" title="var">_</span> <span class="id" title="var">bs</span>)=&gt; //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IH</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="cardinal"><span class="id" title="definition">cardinal</span></a> (<span class="id" title="var">bs</span>: <span class="id" title="axiom">Int</span>): <span class="id" title="axiom">Int</span><br/>
&nbsp;&nbsp;:= <a class="idref" href="Bitset.repr_op.html#popAux"><span class="id" title="definition">popAux</span></a> <a class="idref" href="Bitset.repr_op.html#bs"><span class="id" title="variable">bs</span></a> (<span class="id" title="definition">wordsize</span> <span class="id" title="notation">%/</span> <a class="idref" href="Bitset.repr_op.html#tableSize"><span class="id" title="definition">tableSize</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="cardinal_repr"><span class="id" title="lemma">cardinal_repr</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">bs</span>: <span class="id" title="axiom">Int</span>) <span class="id" title="var">E</span>, <a class="idref" href="Bitset.repr_op.html#machine_repr"><span class="id" title="definition">machine_repr</span></a> <a class="idref" href="Bitset.repr_op.html#bs"><span class="id" title="variable">bs</span></a> <a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">natural_repr</span> (<a class="idref" href="Bitset.repr_op.html#cardinal"><span class="id" title="definition">cardinal</span></a> <a class="idref" href="Bitset.repr_op.html#bs"><span class="id" title="variable">bs</span></a>) <span class="id" title="notation">#|</span><a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a><span class="id" title="notation">|</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ <span class="id" title="var">bs</span> <span class="id" title="var">E</span> [<span class="id" title="var">bv</span> [<span class="id" title="var">int_repr</span> <span class="id" title="var">fin_repr</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<span class="id" title="definition">natural_repr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<span class="id" title="lemma">existsP</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="notation">#</span> <span class="id" title="notation">(</span><span class="id" title="notation">#|</span><span class="id" title="var">E</span><span class="id" title="notation">|</span><span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<span class="id" title="lemma">andP</span>; <span class="id" title="tactic">split</span>⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> - (@<a class="idref" href="Bitset.ops.cardinal.html#cardinal_repr"><span class="id" title="lemma">cardinal.cardinal_repr</span></a> <span class="id" title="var">_</span> <a class="idref" href="Bitset.repr_op.html#tableSize"><span class="id" title="definition">tableSize</span></a> <span class="id" title="var">bv</span>) ⇒ //.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Refold&nbsp;<span class="inlinecode"><span class="id" title="var">cardinal</span></span>,&nbsp;for&nbsp;the&nbsp;proof's&nbsp;sake&nbsp;(and&nbsp;my&nbsp;sanity)&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -[<a class="idref" href="Bitset.repr_op.html#cardinal"><span class="id" title="definition">cardinal</span></a> <span class="id" title="var">_</span>]/(<a class="idref" href="Bitset.repr_op.html#popAux"><span class="id" title="definition">popAux</span></a> <span class="id" title="var">bs</span> (<span class="id" title="definition">wordsize</span> <span class="id" title="notation">%/</span> <a class="idref" href="Bitset.repr_op.html#tableSize"><span class="id" title="definition">tableSize</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="Bitset.ops.cardinal.html#cardinal"><span class="id" title="definition">cardinal.cardinal</span></a> -[<span class="id" title="definition">div.divn</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>]/(<span class="id" title="definition">wordsize</span> <span class="id" title="notation">%/</span> <a class="idref" href="Bitset.repr_op.html#tableSize"><span class="id" title="definition">tableSize</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="Bitset.repr_op.html#popAux_repr"><span class="id" title="definition">popAux_repr</span></a> <span class="id" title="var">_</span> <span class="id" title="var">bv</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*&nbsp;TODO:&nbsp;what&nbsp;do&nbsp;we&nbsp;use&nbsp;this&nbsp;one&nbsp;for?&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="ntz"><span class="id" title="definition">ntz</span></a> (<span class="id" title="var">bs</span>: <span class="id" title="axiom">Int</span>): <span class="id" title="axiom">Int</span><br/>
&nbsp;&nbsp;:= <span class="id" title="axiom">add</span> (<a class="idref" href="Bitset.repr_op.html#toInt"><span class="id" title="axiom">toInt</span></a> <span class="id" title="definition">wordsize</span>) (<span class="id" title="axiom">neg</span> (<a class="idref" href="Bitset.repr_op.html#cardinal"><span class="id" title="definition">cardinal</span></a> (<span class="id" title="axiom">lor</span> <a class="idref" href="Bitset.repr_op.html#bs"><span class="id" title="variable">bs</span></a> (<span class="id" title="axiom">neg</span> <a class="idref" href="Bitset.repr_op.html#bs"><span class="id" title="variable">bs</span></a>)))).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="ntz_repr"><span class="id" title="lemma">ntz_repr</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<span class="id" title="var">bs</span>: <span class="id" title="axiom">Int</span>) <span class="id" title="var">x</span> <span class="id" title="var">E</span>, <a class="idref" href="Bitset.repr_op.html#machine_repr"><span class="id" title="definition">machine_repr</span></a> <a class="idref" href="Bitset.repr_op.html#bs"><span class="id" title="variable">bs</span></a> <a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Bitset.repr_op.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="keyword">in</span> <a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">natural_repr</span> (<a class="idref" href="Bitset.repr_op.html#ntz"><span class="id" title="definition">ntz</span></a> <a class="idref" href="Bitset.repr_op.html#bs"><span class="id" title="variable">bs</span></a>) <span class="id" title="notation">[</span><span class="id" title="notation">arg</span> <span class="id" title="notation">min_</span><span class="id" title="notation">(</span><span class="id" title="var">k</span> <span class="id" title="notation">&lt;</span> <a class="idref" href="Bitset.repr_op.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="keyword">in</span> <a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a><span class="id" title="notation">)</span> <span class="id" title="var">k</span><span class="id" title="notation">]</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ <span class="id" title="var">bs</span> <span class="id" title="var">x</span> <span class="id" title="var">E</span> [<span class="id" title="var">bv</span> [<span class="id" title="var">Hbv1</span> <span class="id" title="var">Hbv2</span>]] <span class="id" title="var">Hx</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<span class="id" title="definition">natural_repr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<span class="id" title="lemma">existsP</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="notation">#</span><span class="id" title="notation">[</span><span class="id" title="notation">arg</span> <span class="id" title="notation">min_</span><span class="id" title="notation">(</span><span class="id" title="var">k</span> <span class="id" title="notation">&lt;</span> <span class="id" title="var">x</span> <span class="id" title="keyword">in</span> <span class="id" title="var">E</span><span class="id" title="notation">)</span> <span class="id" title="var">k</span><span class="id" title="notation">]</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="Bitset.ops.min.html#ntz_repr"><span class="id" title="lemma">min.ntz_repr</span></a> <span class="id" title="var">_</span> <span class="id" title="var">bv</span> <a class="idref" href="Bitset.repr_op.html#tableSize"><span class="id" title="definition">tableSize</span></a>)=&gt; //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="Bitset.repr_op.html#ntz"><span class="id" title="definition">ntz</span></a> /<a class="idref" href="Bitset.ops.min.html#ntz"><span class="id" title="definition">min.ntz</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> <span class="id" title="var">E'</span> := <span class="id" title="notation">[</span> <span class="id" title="notation">set</span> <span class="id" title="var">x</span> <span class="id" title="notation">:</span> <span class="id" title="notation">'</span><span class="id" title="notation">I_wordsize</span> <span class="id" title="notation">|</span> <span class="id" title="definition">getBit</span> (<a class="idref" href="Bitset.ops.min.html#fill_ntz"><span class="id" title="definition">min.fill_ntz</span></a> <span class="id" title="var">bv</span>) <span class="id" title="var">x</span> <span class="id" title="notation">]</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">H</span>: <a class="idref" href="Bitset.spec.html#repr"><span class="id" title="definition">repr</span></a> (<span class="id" title="definition">orB</span> <span class="id" title="var">bv</span> (<span class="id" title="definition">negB</span> <span class="id" title="var">bv</span>)) <span class="id" title="var">E'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="Bitset.spec.html#repr"><span class="id" title="definition">repr</span></a> -<span class="id" title="lemma">setP</span> /<span class="id" title="definition">eq_mem</span>⇒ <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> !<span class="id" title="lemma">in_set</span> <a class="idref" href="Bitset.ops.min.html#fill_ntz_repr"><span class="id" title="lemma">min.fill_ntz_repr</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<span class="id" title="lemma">andP</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">subB_equiv_addB_negB</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">add_repr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Bitset.repr_op.html#toInt_def"><span class="id" title="axiom">toInt_def</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<span class="id" title="axiom">eqIntP</span>⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">neg_repr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: (<a class="idref" href="Bitset.ops.cardinal.html#cardinal_repr"><span class="id" title="lemma">cardinal.cardinal_repr</span></a> <span class="id" title="var">_</span> <a class="idref" href="Bitset.repr_op.html#tableSize"><span class="id" title="definition">tableSize</span></a> (<span class="id" title="definition">orB</span> <span class="id" title="var">bv</span> (<span class="id" title="definition">negB</span> <span class="id" title="var">bv</span>)) <span class="id" title="var">E'</span>)=&gt; <span class="id" title="var">H'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">Hok</span>: <a class="idref" href="Bitset.repr_op.html#machine_repr"><span class="id" title="definition">machine_repr</span></a> (<span class="id" title="axiom">lor</span> <span class="id" title="var">bs</span> (<span class="id" title="axiom">neg</span> <span class="id" title="var">bs</span>)) <span class="id" title="var">E'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<span class="id" title="definition">orB</span> <span class="id" title="var">bv</span> (<span class="id" title="definition">negB</span> <span class="id" title="var">bv</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">lor_repr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hbv1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="lemma">neg_repr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hbv1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: (<a class="idref" href="Bitset.repr_op.html#cardinal_repr"><span class="id" title="lemma">cardinal_repr</span></a> (<span class="id" title="axiom">lor</span> <span class="id" title="var">bs</span> (<span class="id" title="axiom">neg</span> <span class="id" title="var">bs</span>)) <span class="id" title="var">E'</span> <span class="id" title="var">Hok</span>)=&gt; /<span class="id" title="lemma">existsP</span>[<span class="id" title="var">y</span> /<span class="id" title="lemma">andP</span>[<span class="id" title="var">Hy1</span> /<span class="id" title="lemma">eqP</span> <span class="id" title="var">Hy2</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Hy2</span> <span class="id" title="keyword">in</span> <span class="id" title="var">Hy1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hy1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>

<br/>
</div>

<div class="doc">
Module type describing set operations &amp; implementations using bitsets and finsets 
</div>
<div class="code">
<span class="id" title="keyword">Module</span> <span class="id" title="keyword">Type</span> <a name="SET"><span class="id" title="module">SET</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <a name="SET.T"><span class="id" title="axiom">T</span></a> : <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <a name="SET.eq"><span class="id" title="axiom">eq</span></a> : <a class="idref" href="Bitset.repr_op.html#SET.T"><span class="id" title="axiom">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Bitset.repr_op.html#SET.T"><span class="id" title="axiom">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Infix</span> <a name="ab19c3deb118b9584ed45c78a4a7e04d"><span class="id" title="notation">&quot;</span></a>=" := <a class="idref" href="Bitset.repr_op.html#SET.eq"><span class="id" title="axiom">eq</span></a> : <span class="id" title="var">SET_scope</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">SET_scope</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Bind</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">SET_scope</span> <span class="id" title="keyword">with</span> <span class="id" title="var">T</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <a name="SET.empty"><span class="id" title="axiom">empty</span></a> : <a class="idref" href="Bitset.repr_op.html#SET.T"><span class="id" title="axiom">T</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="e0420675290a66d624e4d4155b19992f"><span class="id" title="notation">&quot;</span></a>Ø" := <a class="idref" href="Bitset.repr_op.html#SET.empty"><span class="id" title="axiom">empty</span></a> : <span class="id" title="var">SET_scope</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <a name="SET.singleton"><span class="id" title="axiom">singleton</span></a> : <span class="id" title="notation">'</span><span class="id" title="notation">I_wordsize</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Bitset.repr_op.html#SET.T"><span class="id" title="axiom">T</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="95216d4035a9dd6790546f36cce3ffc3"><span class="id" title="notation">&quot;</span></a>{ x }" := (<a class="idref" href="Bitset.repr_op.html#SET.singleton"><span class="id" title="axiom">singleton</span></a> <span class="id" title="var">x</span>) : <span class="id" title="var">SET_scope</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <a name="SET.compl"><span class="id" title="axiom">compl</span></a> : <a class="idref" href="Bitset.repr_op.html#SET.T"><span class="id" title="axiom">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Bitset.repr_op.html#SET.T"><span class="id" title="axiom">T</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="bd8902a3b2651f5d6331b5993cc6ab41"><span class="id" title="notation">&quot;</span></a>~ E" := (<a class="idref" href="Bitset.repr_op.html#SET.compl"><span class="id" title="axiom">compl</span></a> <span class="id" title="var">E</span>) : <span class="id" title="var">SET_scope</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <a name="SET.create"><span class="id" title="axiom">create</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Bitset.repr_op.html#SET.T"><span class="id" title="axiom">T</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <a name="SET.get"><span class="id" title="axiom">get</span></a> : <a class="idref" href="Bitset.repr_op.html#SET.T"><span class="id" title="axiom">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="notation">'</span><span class="id" title="notation">I_wordsize</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="d75889c33aaed25d74bb836abeb5639c"><span class="id" title="notation">&quot;</span></a>x \in E" := (<a class="idref" href="Bitset.repr_op.html#SET.get"><span class="id" title="axiom">get</span></a> <span class="id" title="var">E</span> <span class="id" title="var">x</span>) : <span class="id" title="var">SET_scope</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <a name="SET.inter"><span class="id" title="axiom">inter</span></a> : <a class="idref" href="Bitset.repr_op.html#SET.T"><span class="id" title="axiom">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Bitset.repr_op.html#SET.T"><span class="id" title="axiom">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Bitset.repr_op.html#SET.T"><span class="id" title="axiom">T</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="5be95dfc87a681db1a73208d34131f5b"><span class="id" title="notation">&quot;</span></a>E1 \cap E2" := (<a class="idref" href="Bitset.repr_op.html#SET.inter"><span class="id" title="axiom">inter</span></a> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0) : <span class="id" title="var">SET_scope</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <a name="SET.keep_min"><span class="id" title="axiom">keep_min</span></a> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">E</span>: <a class="idref" href="Bitset.repr_op.html#SET.T"><span class="id" title="axiom">T</span></a>) <span class="id" title="var">x</span>, <a class="idref" href="Bitset.repr_op.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Bitset.repr_op.html#d75889c33aaed25d74bb836abeb5639c"><span class="id" title="notation">\</span></a><span class="id" title="keyword">in</span> <a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Bitset.repr_op.html#SET.T"><span class="id" title="axiom">T</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="e7dfb5aa52ac21d0831502624aaedee2"><span class="id" title="notation">&quot;</span></a>{ min E }" := (<a class="idref" href="Bitset.repr_op.html#SET.keep_min"><span class="id" title="axiom">keep_min</span></a> <span class="id" title="var">E</span>) : <span class="id" title="var">SET_scope</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <a name="SET.set"><span class="id" title="axiom">set</span></a> : <a class="idref" href="Bitset.repr_op.html#SET.T"><span class="id" title="axiom">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <span class="id" title="notation">'</span><span class="id" title="notation">I_wordsize</span> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Bitset.repr_op.html#SET.T"><span class="id" title="axiom">T</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <a name="SET.symdiff"><span class="id" title="axiom">symdiff</span></a> : <a class="idref" href="Bitset.repr_op.html#SET.T"><span class="id" title="axiom">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Bitset.repr_op.html#SET.T"><span class="id" title="axiom">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Bitset.repr_op.html#SET.T"><span class="id" title="axiom">T</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="47f135c134e9c5aadfe4f0142771b6d6"><span class="id" title="notation">&quot;</span></a>E1 \delta E2" := (<a class="idref" href="Bitset.repr_op.html#SET.symdiff"><span class="id" title="axiom">symdiff</span></a> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0) : <span class="id" title="var">SET_scope</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <a name="SET.union"><span class="id" title="axiom">union</span></a> : <a class="idref" href="Bitset.repr_op.html#SET.T"><span class="id" title="axiom">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Bitset.repr_op.html#SET.T"><span class="id" title="axiom">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="Bitset.repr_op.html#SET.T"><span class="id" title="axiom">T</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="a40f27de891c0f3d67db5b8e9b656ffa"><span class="id" title="notation">&quot;</span></a>E1 \cup E2" := (<a class="idref" href="Bitset.repr_op.html#SET.union"><span class="id" title="axiom">union</span></a> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0) : <span class="id" title="var">SET_scope</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Parameter</span> <a name="SET.cardinal"><span class="id" title="axiom">cardinal</span></a> : <a class="idref" href="Bitset.repr_op.html#SET.T"><span class="id" title="axiom">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Logic.html#d43e996736952df71ebeeae74d10a287"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/8.5beta2/stdlib/Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="ed68654f74d26acab38493da00b82de6"><span class="id" title="notation">&quot;</span></a>| E |" := (<a class="idref" href="Bitset.repr_op.html#SET.cardinal"><span class="id" title="axiom">cardinal</span></a> <span class="id" title="var">E</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 30) : <span class="id" title="var">SET_scope</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Bitset.repr_op.html#SET"><span class="id" title="module">SET</span></a>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <a name="Finset"><span class="id" title="module">Finset</span></a> &lt;: <a class="idref" href="Bitset.repr_op.html#SET"><span class="id" title="module">SET</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Finset.T"><span class="id" title="definition">T</span></a> := <span class="id" title="notation">{</span><span class="id" title="notation">set</span> <span class="id" title="notation">'</span><span class="id" title="notation">I_wordsize</span><span class="id" title="notation">}</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Finset.eq"><span class="id" title="definition">eq</span></a> (<span class="id" title="var">E</span>: <a class="idref" href="Bitset.repr_op.html#Finset.T"><span class="id" title="definition">T</span></a>) (<span class="id" title="var">E'</span>: <a class="idref" href="Bitset.repr_op.html#Finset.T"><span class="id" title="definition">T</span></a>) := <a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">==</span> <a class="idref" href="Bitset.repr_op.html#E'"><span class="id" title="variable">E'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Finset.empty"><span class="id" title="definition">empty</span></a> : <a class="idref" href="Bitset.repr_op.html#Finset.T"><span class="id" title="definition">T</span></a> := <span class="id" title="definition">set0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Finset.singleton"><span class="id" title="definition">singleton</span></a> (<span class="id" title="var">x</span>: <span class="id" title="notation">'</span><span class="id" title="notation">I_wordsize</span>) : <a class="idref" href="Bitset.repr_op.html#Finset.T"><span class="id" title="definition">T</span></a> := <span class="id" title="notation">[</span><span class="id" title="notation">set</span> <a class="idref" href="Bitset.repr_op.html#x"><span class="id" title="variable">x</span></a><span class="id" title="notation">]</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Finset.compl"><span class="id" title="definition">compl</span></a> (<span class="id" title="var">E</span>: <a class="idref" href="Bitset.repr_op.html#Finset.T"><span class="id" title="definition">T</span></a>) := <span class="id" title="notation">~:</span> <a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Finset.create"><span class="id" title="definition">create</span></a> <span class="id" title="var">b</span> := <span class="id" title="keyword">if</span> <a class="idref" href="Bitset.repr_op.html#b"><span class="id" title="variable">b</span></a> <span class="id" title="keyword">then</span> <span class="id" title="notation">[</span> <span class="id" title="notation">set</span> <span class="id" title="notation">:</span> <span class="id" title="notation">'</span><span class="id" title="notation">I_wordsize</span> <span class="id" title="notation">]</span> <span class="id" title="keyword">else</span> <span class="id" title="definition">set0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Finset.get"><span class="id" title="definition">get</span></a> (<span class="id" title="var">E</span>: <a class="idref" href="Bitset.repr_op.html#Finset.T"><span class="id" title="definition">T</span></a>) <span class="id" title="var">x</span> := <a class="idref" href="Bitset.repr_op.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="notation">\</span><span class="id" title="keyword">in</span> <a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Finset.inter"><span class="id" title="definition">inter</span></a> (<span class="id" title="var">E1</span>: <a class="idref" href="Bitset.repr_op.html#Finset.T"><span class="id" title="definition">T</span></a>) <span class="id" title="var">E2</span> := <a class="idref" href="Bitset.repr_op.html#E1"><span class="id" title="variable">E1</span></a> <span class="id" title="notation">:&amp;:</span> <a class="idref" href="Bitset.repr_op.html#E2"><span class="id" title="variable">E2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Finset.keep_min"><span class="id" title="definition">keep_min</span></a> (<span class="id" title="var">E</span>: <a class="idref" href="Bitset.repr_op.html#Finset.T"><span class="id" title="definition">T</span></a>) (<span class="id" title="var">x</span>: <span class="id" title="notation">'</span><span class="id" title="notation">I_wordsize</span>) (<span class="id" title="var">Hx</span>: <a class="idref" href="Bitset.repr_op.html#Finset.get"><span class="id" title="definition">get</span></a> <a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="Bitset.repr_op.html#x"><span class="id" title="variable">x</span></a>): <a class="idref" href="Bitset.repr_op.html#Finset.T"><span class="id" title="definition">T</span></a> := <span class="id" title="notation">[</span><span class="id" title="notation">set</span> <span class="id" title="notation">[</span><span class="id" title="notation">arg</span> <span class="id" title="notation">min_</span><span class="id" title="notation">(</span><span class="id" title="var">k</span> <span class="id" title="notation">&lt;</span> <a class="idref" href="Bitset.repr_op.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="keyword">in</span> <a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a><span class="id" title="notation">)</span> <span class="id" title="var">k</span><span class="id" title="notation">]</span><span class="id" title="notation">]</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Finset.set"><span class="id" title="definition">set</span></a> (<span class="id" title="var">E</span>: <a class="idref" href="Bitset.repr_op.html#Finset.T"><span class="id" title="definition">T</span></a>) <span class="id" title="var">k</span> <span class="id" title="var">b</span> := <span class="id" title="keyword">if</span> <a class="idref" href="Bitset.repr_op.html#b"><span class="id" title="variable">b</span></a> <span class="id" title="keyword">then</span> <span class="id" title="notation">(</span><a class="idref" href="Bitset.repr_op.html#k"><span class="id" title="variable">k</span></a> <span class="id" title="notation">|:</span> <a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a><span class="id" title="notation">)</span> <span class="id" title="keyword">else</span> <span class="id" title="notation">(</span><a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a> <span class="id" title="notation">:\</span> <a class="idref" href="Bitset.repr_op.html#k"><span class="id" title="variable">k</span></a><span class="id" title="notation">)</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Finset.symdiff"><span class="id" title="definition">symdiff</span></a> (<span class="id" title="var">E1</span>: <a class="idref" href="Bitset.repr_op.html#Finset.T"><span class="id" title="definition">T</span></a>) <span class="id" title="var">E2</span> := (<span class="id" title="notation">(</span><a class="idref" href="Bitset.repr_op.html#E2"><span class="id" title="variable">E2</span></a> <span class="id" title="notation">:\:</span> <a class="idref" href="Bitset.repr_op.html#E1"><span class="id" title="variable">E1</span></a><span class="id" title="notation">)</span> <span class="id" title="notation">:|:</span> <span class="id" title="notation">(</span><a class="idref" href="Bitset.repr_op.html#E1"><span class="id" title="variable">E1</span></a> <span class="id" title="notation">:\:</span> <a class="idref" href="Bitset.repr_op.html#E2"><span class="id" title="variable">E2</span></a><span class="id" title="notation">)</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Finset.union"><span class="id" title="definition">union</span></a> (<span class="id" title="var">E1</span>: <a class="idref" href="Bitset.repr_op.html#Finset.T"><span class="id" title="definition">T</span></a>) <span class="id" title="var">E2</span> := <a class="idref" href="Bitset.repr_op.html#E1"><span class="id" title="variable">E1</span></a> <span class="id" title="notation">:|:</span> <a class="idref" href="Bitset.repr_op.html#E2"><span class="id" title="variable">E2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Finset.cardinal"><span class="id" title="definition">cardinal</span></a> (<span class="id" title="var">E</span>: <a class="idref" href="Bitset.repr_op.html#Finset.T"><span class="id" title="definition">T</span></a>) := <span class="id" title="notation">#|</span><a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a><span class="id" title="notation">|</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Bitset.repr_op.html#Finset"><span class="id" title="module">Finset</span></a>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <a name="Bitset"><span class="id" title="module">Bitset</span></a> &lt;: <a class="idref" href="Bitset.repr_op.html#SET"><span class="id" title="module">SET</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Bitset.T"><span class="id" title="definition">T</span></a> := <span class="id" title="axiom">Int</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Bitset.eq"><span class="id" title="definition">eq</span></a> (<span class="id" title="var">E</span>: <a class="idref" href="Bitset.repr_op.html#Bitset.T"><span class="id" title="definition">T</span></a>) (<span class="id" title="var">E'</span>: <a class="idref" href="Bitset.repr_op.html#Bitset.T"><span class="id" title="definition">T</span></a>) := <span class="id" title="axiom">eq</span> <a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="Bitset.repr_op.html#E'"><span class="id" title="variable">E'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Bitset.empty"><span class="id" title="definition">empty</span></a> := <span class="id" title="axiom">zero</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Bitset.singleton"><span class="id" title="definition">singleton</span></a> := <a class="idref" href="Bitset.repr_op.html#Bitset.singleton"><span class="id" title="definition">singleton</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Bitset.compl"><span class="id" title="definition">compl</span></a> := <a class="idref" href="Bitset.repr_op.html#Bitset.compl"><span class="id" title="definition">compl</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Bitset.create"><span class="id" title="definition">create</span></a> := <a class="idref" href="Bitset.repr_op.html#Bitset.create"><span class="id" title="definition">create</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Bitset.get"><span class="id" title="definition">get</span></a> := <a class="idref" href="Bitset.repr_op.html#Bitset.get"><span class="id" title="definition">get</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Bitset.inter"><span class="id" title="definition">inter</span></a> := <a class="idref" href="Bitset.repr_op.html#Bitset.inter"><span class="id" title="definition">inter</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Bitset.keep_min"><span class="id" title="definition">keep_min</span></a> (<span class="id" title="var">E</span>: <a class="idref" href="Bitset.repr_op.html#Bitset.T"><span class="id" title="definition">T</span></a>) (<span class="id" title="var">x</span>: <span class="id" title="notation">'</span><span class="id" title="notation">I_wordsize</span>) (<span class="id" title="var">Hx</span>: <a class="idref" href="Bitset.repr_op.html#Bitset.get"><span class="id" title="definition">get</span></a> <a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a> <a class="idref" href="Bitset.repr_op.html#x"><span class="id" title="variable">x</span></a>): <a class="idref" href="Bitset.repr_op.html#Bitset.T"><span class="id" title="definition">T</span></a> := <a class="idref" href="Bitset.repr_op.html#Bitset.keep_min"><span class="id" title="definition">keep_min</span></a> <a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Bitset.set"><span class="id" title="definition">set</span></a> <span class="id" title="var">E</span> (<span class="id" title="var">x</span>: <span class="id" title="notation">'</span><span class="id" title="notation">I_wordsize</span>) <span class="id" title="var">b</span> := <a class="idref" href="Bitset.repr_op.html#Bitset.set"><span class="id" title="definition">set</span></a> <a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a> (<a class="idref" href="Bitset.repr_op.html#Bitset.toInt"><span class="id" title="axiom">toInt</span></a> <a class="idref" href="Bitset.repr_op.html#x"><span class="id" title="variable">x</span></a>) <a class="idref" href="Bitset.repr_op.html#b"><span class="id" title="variable">b</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Bitset.symdiff"><span class="id" title="definition">symdiff</span></a> := <a class="idref" href="Bitset.repr_op.html#Bitset.symdiff"><span class="id" title="definition">symdiff</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Bitset.union"><span class="id" title="definition">union</span></a> := <a class="idref" href="Bitset.repr_op.html#Bitset.union"><span class="id" title="definition">union</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Bitset.cardinal"><span class="id" title="definition">cardinal</span></a> (<span class="id" title="var">E</span>: <a class="idref" href="Bitset.repr_op.html#Bitset.T"><span class="id" title="definition">T</span></a>) := <a class="idref" href="Bitset.repr_op.html#Bitset.fromInt"><span class="id" title="axiom">fromInt</span></a> (<a class="idref" href="Bitset.repr_op.html#Bitset.cardinal"><span class="id" title="definition">cardinal</span></a> <a class="idref" href="Bitset.repr_op.html#E"><span class="id" title="variable">E</span></a>).<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Bitset.repr_op.html#Bitset"><span class="id" title="module">Bitset</span></a>.<br/>
</div>
</div>

<div id="footer">
<hr/><a href="index.html">Index</a><hr/>This page has been generated by <a href="http://coq.inria.fr/">coqdoc</a>
</div>

</div>

</body>
</html>